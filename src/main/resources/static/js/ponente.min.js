var idPonente,id_persona,token=$("meta[name='_csrf']").attr("content");function guardarPonente(){var e=$("#temaPonente").val();limpiarErrores();var n={};n.id=idPonente,n.tema=e,n.educacionContinua={},n.educacionContinua.id=idEducacionContinua,n.tipoParticipante={},n.tipoParticipante.id="2","0"!=id_persona&&(n.persona={},n.persona.id=id_persona),showSpinnerModal("btnSavePonente","btnSpinnerPonente"),$.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),url:contextPath+"/educacion-continua/ponentes/save",cache:!1,success:function(e){null!=e&&""!=e&&creacionTarjetaInscripcion(e),toastr.success("Se ha guardado el ponente","Excelente!"),$("#modalPonentes").modal("hide"),hideSpinnerModal("btnSavePonente","btnSpinnerPonente"),refreshTableAsistentes(),reloadListPonentes()},error:function(e){hideSpinnerModal("btnSavePonente","btnSpinnerPonente"),e.responseJSON.length>0?(toastr.error("No se pudo procesar la solicitud...","Error!"),e.responseJSON.forEach(function(e){if("persona"==e.field){var n=document.getElementById("select_ponentes");document.getElementById("errorPonente").innerText=e.defaultMessage,n.classList.add("is-invalid")}if("tema"==e.field){var t=document.getElementById("temaPonente");document.getElementById("errorTema").innerText=e.defaultMessage,t.classList.add("is-invalid")}})):toastr.error(e.responseJSON.message,"Error!")}})}function editarPonente(e){$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",url:contextPath+"/educacion-continua/ponentes/search/"+e.dataset.id,cache:!1,success:function(e){$("#modalPonentes").modal(),$("#temaPonente").val(e.tema),$("#tdPonente").val(e.participante.tipoDocumento),$("#documentoPonente").val(e.participante.numeroDocumento),$("#nombrePonente").val(e.participante.nombrePersona),idPonente=e.participante.id,id_persona=e.participante.idPersona},error:function(e){$("#msg").html("<span style='color: red'>Programa is required</span>")}})}function eliminarPonente(e){$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",data:{id:e.dataset.id},url:contextPath+"/educacion-continua/ponentes/delete",cache:!1,success:function(e){toastr.success(e,"Excelente!"),reloadListPonentes(),refreshTableAsistentes()},error:function(e){toastr.error(e.responseJSON.message,"Error!")}})}function searchPosiblePonente(){var e=$("#valueBusqueda").val(),n=$("#selectTipoBusqueda").val();""!=e&&0!=n?(document.getElementById("tablaPonentes").style.display="inline",table=$("#table2").DataTable({destroy:!0,lengthMenu:[5],language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"},ajax:{contentType:"application/json; charset=utf-8",url:contextPath+"/educacion-continua/ponentes/filtro",type:"GET",data:{tipo_busqueda:n,value:e}},columns:[{data:"documento"},{data:"tipoDocumento"},{data:"nombre"},{data:"id",render:function(e){return'<button type="button" class="btn btn-sm btn-rojoufps btn-icon-only" onclick="agregarPonente(this)" data-id="'+e+'" data-toggle="tooltip" data-placement="right" title="Agregar Ponente"><span class="btn-inner--icon"><i class="far fa-user"></i></span></button>'}}],drawCallback:function(e){$('[data-toggle="tooltip"]').tooltip()}})):toastr.error("Diligencie los filtros de b√∫squeda correctamente","Error!")}function limpiarForm(){$("#temaPonente").val(""),$("#select_ponentes").val(0).trigger("change"),$("#tpPonente").val(""),$("#documentoPonente").val(""),$("#nombrePonente").val(""),idPonente=null,$("#select_ponentes").prop("disabled",!1)}function agregarPonente(e){$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",url:contextPath+"/educacion-continua/ponentes/search/persona",data:{id:e.dataset.id},cache:!1,success:function(e){$("#modalPonentes").modal("show"),$("#tdPonente").val(e.tipoDocumento),$("#documentoPonente").val(e.documento),$("#nombrePonente").val(e.nombre),id_persona=e.id,idPonente=0},error:function(e){$("#msg").html("<span style='color: red'>Programa is required</span>")}})}function limpiarErrores(){var e=document.getElementById("temaPonente");document.getElementById("errorTema").innerText="",e.classList.remove("is-invalid")}function reloadListPonentes(){var e=contextPath+"/educacion-continua/ponentes/"+idEducacionContinua;$("#div_list_ponentes").load(e);var n=contextPath+"/educacion-continua/ponentes/detalles/"+idEducacionContinua;$("#div_list_detalles_ponentes").load(n)}$(document).ready(function(){$("#modalPonentes").on("show.bs.modal",function(e){limpiarForm(),limpiarErrores()})});