function showLoader(){document.getElementById("divLoader").style.display="flex",document.getElementById("formUsuario").style.display="none"}function hideLoader(){document.getElementById("divLoader").style.display="none",document.getElementById("formUsuario").style.display="inline"}function ajaxSaveUsuario(e,o){var r=!1,c=validateSelect("selectTipoDoc","errorTipoDoc"),a=validateInputTextRequerido("numDoc","errorNumeroDocumento"),n=validateInputTextRequerido("primNom","errorPrimerNombre"),t=validateInputTextRequerido("primApe","errorPrimerApellido"),d=validateInputTextRequerido("fechaNac","errorFechaNacimiento"),l=validateCheckboxGenero("errorGenero"),m=validateCheckboxEstadoCivil("errorEstadoCivil"),s=validateInputTextRequerido("email","errorEmail"),u=validateEmail("email","errorEmail"),p=validateInputNumberRequerido("telefono","errorTelefono"),v=validateCheckboxPerfiles("cbEst","cbDoc","cbAdminvo","cbGraduado","cbExt","errorPerfiles"),f=validateSelect("selectPaisNacimiento","errorPaisNacimiento"),b=validateLengthTxt("primNom","errorPrimerNombre",20),E=validateLengthTxt("segNom","errorSegundoNombre",20),g=validateLengthTxt("primApe","errorPrimerApellido",20),D=validateLengthTxt("segApe","errorSegundoApellido",20),h=validateLengthTxt("direccion","errorDireccion",100);if(c&&a&&n&&t&&d&&l&&m&&s&&u&&p&&v&&f&&b&&E&&g&&D&&h||(r=!0),"170"==$("#selectPaisNacimiento").val()){var k=validateSelect("selectDepartamentoNacimiento","errorDeptoNacimiento"),A=validateSelect("selectMunicipioNacimiento","errorMpioNacimiento");k&&A||(r=!0)}if(document.getElementById("cbEst").checked){var N=validateSelect("programaAsociado","errorProgramaEstudiante"),x=validateInputNumberRequerido("codigo","errorCodigoEstudiante");N&&x||(r=!0)}if(document.getElementById("cbDoc").checked){var P=validateSelect("selectDeptoAdscrito","errorDeptoDocente"),y=validateInputNumberRequerido("codDocente","errorCodigoDocente");P&&y||(r=!0)}if(document.getElementById("cbAdminvo").checked){var G=validateInputTextRequerido("dependencia","errorDependenciaAdminvo"),_=validateInputTextRequerido("cargo","errorCargoAdminvo"),B=validateLengthTxt("dependencia","errorDependenciaAdminvo",50),I=validateLengthTxt("cargo","errorCargoAdminvo",50);G&&_&&B&&I||(r=!0)}if(document.getElementById("cbGraduado").checked&&(G=validateSelect("selectProgramaGraduado","errorProgramaGraduado"),_=validateAnio("anioGraduado","errorAnioGraduado"),G&&_||(r=!0)),document.getElementById("cbExt").checked){var T=validateInputTextRequerido("profesion","errorProfesionExterno"),S=validateInputTextRequerido("empresa","errorEmpresa"),C=validateLengthTxt("profesion","errorProfesionExterno",50),U=validateLengthTxt("empresa","errorEmpresa",50);T&&S&&C&&U||(r=!0)}if(r)return hideLoader(),void toastr.error("Debes diligenciar el formulario correctamente","Error!");var M={};M.id=e,M.idTipoDocumento=$("#selectTipoDoc").val(),M.numeroDocumento=$("#numDoc").val();var L=$("#fechaExp").val().split("/");M.fechaExpedicionDocumento=new Date(L[2],L[1]-1,L[0]),M.primerNombre=$("#primNom").val(),M.segundoNombre=$("#segNom").val(),M.primerApellido=$("#primApe").val(),M.segundoApellido=$("#segApe").val(),M.idGenero=$('input[name="genero"]:checked').val(),M.idEstadoCivil=$('input[name="estadoCivil"]:checked').val();var j=$("#fechaNac").val().split("/");M.fechaNacimiento=new Date(j[2],j[1]-1,j[0]),M.idPaisNacimiento=$("#selectPaisNacimiento").val(),M.idDepartamentoNacimiento=$("#selectDepartamentoNacimiento").val(),M.idMunicipioNacimiento=$("#selectMunicipioNacimiento").val(),M.email=$("#email").val(),M.direccion=$("#direccion").val(),M.telefono=$("#telefono").val(),M.codigoProgramaEstudiante=$("#codigo").val(),M.idProgramaEstudiante=$("#programaAsociado").val(),M.profesion=$("#profesion").val(),M.estudiante=document.getElementById("cbEst").checked,M.docente=document.getElementById("cbDoc").checked,M.administrativo=document.getElementById("cbAdminvo").checked,M.graduado=document.getElementById("cbGraduado").checked,M.externo=document.getElementById("cbExt").checked,M.idProgramaGraduado=$("#selectProgramaGraduado").val(),M.anioGraduado=$("#anioGraduado").val(),M.idDeptoAdscrito=$("#selectDeptoAdscrito").val(),M.codigoDocente=$("#codDocente").val(),M.dependencia=$("#dependencia").val(),M.cargo=$("#cargo").val(),M.empresa=$("#empresa").val(),showSpinnerModal("btnGuardarUsuario","btnSpinnerUsuarios"),$.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(M),url:contextPath+"/registrarse",cache:!1,success:function(e){0==caso?toastr.success("Se ha creado su usuario, inicie Sesi\xf3n para acceder","Excelente!"):toastr.success("Se ha guardado el usuario exitosamente","Excelente!"),window.setTimeout(function(){window.location.href=o},1e3)},error:function(e){hideSpinnerModal("btnGuardarUsuario","btnSpinnerUsuarios"),toastr.error(e.responseJSON.message,"Error!")}})}function estudiante(){mostrar("divAdicional","block"),1==document.getElementById("cbEst").checked?(mostrar("formEstudiante","block"),ocultar("formExterno"),$("#cbExt").prop("checked",!1)):ocultar("formEstudiante")}function docente(){mostrar("divAdicional","block"),1==document.getElementById("cbDoc").checked?(mostrar("formDocente","block"),ocultar("formExterno"),$("#cbExt").prop("checked",!1)):ocultar("formDocente")}function adminvo(){mostrar("divAdicional","block"),1==document.getElementById("cbAdminvo").checked?(mostrar("formAdministrativo","block"),ocultar("formExterno"),$("#cbExt").prop("checked",!1)):ocultar("formAdministrativo")}function graduado(){mostrar("divAdicional","block"),1==document.getElementById("cbGraduado").checked?(mostrar("formGraduado","block"),ocultar("formExterno"),$("#cbExt").prop("checked",!1)):ocultar("formGraduado")}function externo(){mostrar("divAdicional","block"),1==document.getElementById("cbExt").checked?($("#cbEst").prop("checked",!1),$("#cbDoc").prop("checked",!1),$("#cbAdminvo").prop("checked",!1),$("#cbGraduado").prop("checked",!1),mostrar("formExterno","block"),ocultar("formEstudiante","block"),ocultar("formDocente","block"),ocultar("formAdministrativo","block"),ocultar("formGraduado","block")):ocultar("divAdicional")}function loadUsuario(){null!=id&&($("#selectTipoDoc").val(),$("#numDoc").val(),$("#fechaExp").val(),$("#primNom").val(),$("#segNom").val(),$("#primApe").val(),$("#segApe").val(),$("#fechaNac").val(),$("#selectPaisNacimiento").val(),$("#selectDepartamentoNacimiento").val(),$("#selectMunicipioNacimiento").val(),$("#email").val(),$("#telefono").val(),$("#direccion").val(),$("#selectTipoDoc").val(),$("#selectTipoDoc").val())}$(document).ready(function(){var e=null,o=0;0==caso?(o=null==persona.id||0==persona.id?0:persona.id,e=contextPath+"/"):1==caso?(o=null==persona.id?0:persona.id,e=contextPath+"/usuarios"):(o=persona.id,e=contextPath+"/perfil"),$("#selectTipoDoc").on("change",function(e){e.preventDefault(),validateSelect("selectTipoDoc","errorTipoDoc")}),$("#selectPaisNacimiento").on("change",function(e){e.preventDefault(),validateSelect("selectPaisNacimiento","errorPaisNacimiento")}),$("#selectDepartamentoNacimiento").on("change",function(e){e.preventDefault(),validateSelect("selectDepartamentoNacimiento","errorDeptoNacimiento")}),$("#selectMunicipioNacimiento").on("change",function(e){e.preventDefault(),validateSelect("selectMunicipioNacimiento","errorMpioNacimiento")}),$("#programaAsociado").on("change",function(e){e.preventDefault(),validateSelect("programaAsociado","errorProgramaEstudiante")}),$("#selectDeptoAdscrito").on("change",function(e){e.preventDefault(),validateSelect("selectDeptoAdscrito","errorDeptoDocente")}),$("#selectProgramaGraduado").on("change",function(e){e.preventDefault(),validateSelect("selectProgramaGraduado","errorProgramaGraduado")}),$('input[name="genero"]').click(function(){cleanMsj("errorGenero")}),$('input[name="estadoCivil"]').click(function(){cleanMsj("errorEstadoCivil")}),$("#cbEst").click(function(){validateCheckboxPerfiles("cbEst","cbDoc","cbAdminvo","cbGraduado","cbExt","errorPerfiles")}),$("#cbDoc").click(function(){validateCheckboxPerfiles("cbEst","cbDoc","cbAdminvo","cbGraduado","cbExt","errorPerfiles")}),$("#cbAdminvo").click(function(){validateCheckboxPerfiles("cbEst","cbDoc","cbAdminvo","cbGraduado","cbExt","errorPerfiles")}),$("#cbGraduado").click(function(){validateCheckboxPerfiles("cbEst","cbDoc","cbAdminvo","cbGraduado","cbExt","errorPerfiles")}),$("#cbExt").click(function(){validateCheckboxPerfiles("cbEst","cbDoc","cbAdminvo","cbGraduado","cbExt","errorPerfiles")}),$(".cancel").on("click",function(o){o.preventDefault(),window.setTimeout(function(){window.location.href=e},1e3)}),$(".save").on("click",function(r){r.preventDefault(),ajaxSaveUsuario(o,e)})});