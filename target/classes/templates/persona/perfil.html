<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layouts/layout :: head">
	<meta charset="UTF-8"/>
</head>
<body>
  <!-- Application container -->
  <div class="container-fluid container-application">
    <!-- Content -->
    <div class="main-content position-relative">
      <!-- Main nav -->
      <div th:replace="layouts/logosHead :: logosHead"></div>
      <nav th:replace="layouts/navbar :: navbar"></nav>
      
      <!-- Page content -->
      <div class="page-content col-lg-11 center">
       <!-- Project cards -->
       <nav aria-label="breadcrumb">
		  <ol class="breadcrumb breadcrumb-links">
		    <li class="breadcrumb-item"><a class="red-ufps-breadcrumb" th:href="@{/}">Inicio</a></li>
		  </ol>
		</nav>
        <!-- Page title -->
       	<div class="contenido ml-3 mr-3 pb-2" >
        
        <div class="page-title">
        	<div class="row justify-content-between align-items-center">
            <div class="col-md-6 d-flex align-items-center justify-content-between justify-content-md-start mb-3 mb-md-0">
              <!-- Page title + Go Back button -->
              <div class="d-inline-block text-dark">
                <h6 class="h5 d-inline-block  mb-0  text-dark"><strong>MI PERFIL</strong></h6>
              </div>
            </div>
            <div class="col-md-6 d-flex align-items-center justify-content-between justify-content-md-end">
              
					<a href="#" data-toggle="modal" data-target="#modalControl" th:if="${persona.isSuperAdmin() or persona.isDirPrograma()}" class="btn btn-sm btn-primary"><i class="fas fa-people-arrows"></i> Ceder Control</a>
        			<a  th:href="@{/perfil/editar}" class="btn btn-sm btn-primary"><i class="far fa-edit"></i> Editar Datos</a>	
              
            </div>
          </div>
        	
        	
        </div>
        <br>
        <div th:replace="loader :: loader"></div>
        <div class="card">
        	<div class="card-body">
        		<div class="card ">
        		<div class="card-body ">
        		<div class="row col-md-12 align-items-center">
        	<div class="col-md-7 table-responsive">
        	<h5>Información Personal</h5>
        		<table class="table align-items-center">
        			<tbody>
        				<tr>
        					<td class="td2"><strong>Tipo de Documento</strong></td>
        					<td class="td2" th:text="${persona.tipoDocumento}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Número de Documento</strong></td>
        					<td class="td2" th:text="${persona.numeroDocumento}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Fecha Expedición Documento</strong></td>
        					<td class="td2" th:text="${#dates.format(persona.fechaExpedicionDocumento, 'dd/MM/yyyy')}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Primer Nombre</strong></td>
        					<td class="td2" th:text="${persona.primerNombre}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Segundo Nombre</strong></td>
        					<td class="td2" th:text="${persona.segundoNombre}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Primer Apellido</strong></td>
        					<td class="td2" th:text="${persona.primerApellido}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Segundo Apellido</strong></td>
        					<td class="td2" th:text="${persona.segundoApellido}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Género</strong></td>
        					<td class="td2" th:text="${persona.genero}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Estado Civil</strong></td>
        					<td class="td2" th:text="${persona.estadoCivil}">Soltero(a)</td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Fecha Nacimiento</strong></td>
        					<td class="td2" th:text="${#dates.format(persona.fechaNacimiento, 'dd/MM/yyyy')}">03/01/1997</td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Pais Nacimiento</strong></td>
        					<td class="td2" th:text="${persona.paisNacimiento}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Departamento Nacimiento</strong></td>
        					<td class="td2" th:text="${persona.deptoNacimiento}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Municipio Nacimiento</strong></td>
        					<td class="td2" th:text="${persona.mpioNacimiento}"></td>
        				</tr>
        			</tbody>
        		</table>
        	</div>
        	<div class="col-md-5">
        		<div class="mt-3 col-md-12" style="text-align:center;">
        			<img alt="Image placeholder"  th:src="@{${photoUser}}" style="height:50%; width:50%"  >
        		</div>
        		<br>
        		<div class="table-responsive">
        		<h5>Información de Contacto</h5>
        		<table class="table align-items-center col-md-12"  >
        			<tbody>
        				<tr>
        					<td class="td2"><strong>Email</strong></td>
        					<td class="td2" th:text="${persona.email}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Telefono</strong></td>
        					<td class="td2" th:text="${persona.telefono}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Dirección</strong></td>
        					<td class="td2" th:text="${persona.direccion}"></td>
        				</tr>
        			</tbody>
        		</table>
        		</div>
        	</div>
        </div>
        </div>
        </div>
        <hr style="border-top:1px solid #c6c7cc">
        <div class="row">
        	<div class="card col-md-6" th:if="${persona.isEstudiante()}">
        		<div class="card-body">
        		<h5>Información Académica Estudiante</h5>
        			<table class="table align-items-center col-md-12"  >
        			<tbody>
        				<tr>
        					<td class="td2"><strong>Programa Académico</strong></td>
        					<td class="td2" th:text="${persona.programaEstudiante}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Código</strong></td>
        					<td class="td2" th:text="${persona.codigoProgramaEstudiante}"></td>
        				</tr>
        			</tbody>
        		</table>
        		</div>
        	</div>
        	<div class="card col-md-6" th:if="${persona.isDocente()}">
        		<div class="card-body">
        		<h5>Información Académica Docente</h5>
        			<table class="table align-items-center col-md-12"  >
        			<tbody>
        				<tr>
        					<td class="td2"><strong>Departamento Académico</strong></td>
        					<td class="td2" th:text="${persona.deptoAdscrito}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Código</strong></td>
        					<td class="td2" th:text="${persona.codigoDocente}"></td>
        				</tr>
        			</tbody>
        		</table>
        		</div>
        	</div>
        	<div class="card col-md-6" th:if="${persona.isAdministrativo()}">
        		<div class="card-body">
        		<h5>Información Laboral-Administrativa</h5>
        			<table class="table align-items-center col-md-12"  >
        			<tbody>
        				<tr>
        					<td class="td2"><strong>Dependencia</strong></td>
        					<td class="td2" th:text="${persona.dependencia}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Cargo</strong></td>
        					<td class="td2" th:text="${persona.cargo}"></td>
        				</tr>
        			</tbody>
        		</table>
        		</div>
        	</div>
        	<div class="card col-md-6" th:if="${persona.isGraduado()}">
        		<div class="card-body">
        		<h5>Información Académica Graduado</h5>
        			<table class="table align-items-center col-md-12"  >
        			<tbody>
        				<tr>
        					<td class="td2"><strong>Programa Académico</strong></td>
        					<td class="td2" th:text="${persona.programaGraduado}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Año</strong></td>
        					<td class="td2" th:text="${persona.anioGraduado}"></td>
        				</tr>
        			</tbody>
        		</table>
        		</div>
        	</div>
        	<div class="card col-md-6" th:if="${persona.isExterno()}">
        		<div class="card-body">
        		<h5>Información Laboral</h5>
        			<table class="table align-items-center col-md-12"  >
        			<tbody>
        				<tr>
        					<td class="td2"><strong>Profesión</strong></td>
        					<td class="td2" th:text="${persona.profesion}"></td>
        				</tr>
        				<tr>
        					<td class="td2"><strong>Empresa</strong></td>
        					<td class="td2" th:text="${persona.empresa}"></td>
        				</tr>
        			</tbody>
        		</table>
        		</div>
        	</div>
        	
        </div>
        	</div>
        
        </div>
						
					
		</div>
	  </div>
    
    </div>
    
    <div class="modal fade" id="modalControl" tabindex="-1" role="dialog" aria-labelledby="modalControl" aria-hidden="true" th:fragment="modalControl">
    <div class="modal-dialog " role="document">
        <form>
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title d-flex align-items-center" id="modal-title-change-username">
                        <div>
                            <div class="icon icon-sm icon-shape rounded-circle shadow mr-3">
                                <i class="fas fa-people-arrows"></i>
                            </div>
                        </div>
                        <div>
                            <h6 class="mb-0 text-white" >Ceder Control</h6>
                        </div>
                    </div>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="text-white">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                	<ul class="nav nav-tabs">
					  <li class="nav-item" th:if="${persona.isSuperAdmin()}">
					    <a class="nav-link active" data-toggle="pill" href="#pills-control-superadmin">Super Admin</a>
					  </li>
					  <li class="nav-item" th:if="${persona.isDirPrograma()}">
					    <a th:class="${(persona.isDirPrograma() and not persona.isSuperAdmin()) ? 'nav-link active' : 'nav-link'}" data-toggle="pill" href="#pills-control-dirPrograma">Director de Programa</a>
					  </li>
					</ul>
					<div class="tab-content mt-3" id="pills-tabContent">
					<div th:if="${persona.isSuperAdmin()}" class="tab-pane fade show active" id="pills-control-superadmin" role="tabpanel" aria-labelledby="pills-control-superadmin-tab">
					   <label class="form-control-label">Ingresa el número de documento de la persona quien será el nuevo Super Admin del sistema</label>
				  		<div class="row align-items-center">
	                        <div class="col-md-8">
	                            <div class="form-group">
	                                <label class="form-control-label">Número Documento</label><label class="requerido pl-2">*</label>
	                                <input class="form-control"  type="text" id="documentoSuperAdmin" data-toggle="autosize"/>
	                                
	                                <small class="form-text text-danger"><strong id="errorFacultad"></strong></small>
	                            </div>
	                        </div>
	                        <div class="col-md-4">
	                        	<button type="button" onclick="searchNewSuperAdmin()" class="btn btn-sm btn-red-ufps btn-icon-only" id="btnSaveAreas"><span class="btn-inner--icon">
							        <i class="fas fa-search"></i>
							    </span> </button>
	                        </div>
	                    </div>
	                    <div id="divSuperAdmin" style="display:none">
		                    <div id="divDatosNewAdmin" th:fragment="divDatosNewAdmin">
			                    <div class="table-responsive" th:if="${newSuperAdmin != null}">
			                    	<table class="table table-cards align-items-center">
			                    		<thead>
			                    			<tr>
			                    				<th></th>
			                    				<th>Documento</th>
				                    			<th>Nombre</th>
				                    			<th>Email</th>
			                    			</tr>
			                    			
			                    		</thead>
			                    		<tbody>
			                    			<tr>
			                    				<td><button type="button" onclick="updateNewSuperAdmin(this)" th:data-documento="${newSuperAdmin.documento}" class="btn btn-sm btn-red-ufps btn-icon-only" id="btnSaveAreas"><span class="btn-inner--icon">
									        <i class="fas fa-user-check"></i>
									    </span> </button></td>
			                    				<td th:text="${newSuperAdmin.documento}"></td>
			                    				<td th:text="${newSuperAdmin.nombre}"></td>
			                    				<td th:text="${newSuperAdmin.email}"></td>
			                    			<tr>
			                    		</tbody>
			                    	</table>
			                    </div>
			                    <div th:if="${newSuperAdmin == null}" class="alert alert-danger alert-flush" role="alert">
								    No se encontró usuario registrado con el número de documento ingresado
								</div>
			                  </div>
			                  
		                 </div>
				  	</div>
				  	<div  th:class="${(persona.isDirPrograma() and not persona.isSuperAdmin()) ? 'tab-pane fade show active' :  'tab-pane fade'}" id="pills-control-dirPrograma" th:if="${persona.isDirPrograma()}" role="tabpanel" aria-labelledby="pills-control-dirPrograma-tab">
					   <h6>Información Actual</h6>
				  		<div class="row">
					  		<div class="col-md-3">
	                            <div class="form-group">
	                                <label class="form-control-label">Código</label>
	                                <input class="form-control" th:value="${programa.codigo}" type="text" disabled/>
	                            </div>
	                        </div>
	                        <div class="col-md-9">
	                            <div class="form-group">
	                                <label class="form-control-label">Programa</label>
	                                <input class="form-control" th:value="${programa.programa}" type="text" disabled/>
	                            </div>
	                        </div>
                        </div>
                        <div>
                        	<label class="form-control-label">Ingresa el número de documento de la persona quien será el nuevo Director del Programa Académico en mención</label>
				  		<div class="row align-items-center">
	                        <div class="col-md-8">
	                            <div class="form-group">
	                                <label class="form-control-label">Número documento</label><label class="requerido pl-2">*</label>
	                                <input class="form-control" type="text" id="documentoDirPrograma" data-toggle="autosize"/>
	                                
	                                <small class="form-text text-danger"><strong id="errorFacultad"></strong></small>
	                            </div>
	                        </div>
	                        <div class="col-md-4">
	                        	<button type="button" onclick="searchNewDirPrograma()" class="btn btn-sm btn-red-ufps btn-icon-only" id="btnSaveAreas"><span class="btn-inner--icon">
							        <i class="fas fa-search"></i>
							    </span> </button>
	                        </div>
	                    </div>
	                     <div id="divDirPrograma" style="display:none">
		                    <div id="divDatosNewDirPrograma" th:fragment="divDatosNewDirPrograma">
			                    <div class="table-responsive" th:if="${newDirPrograma != null and newDirPrograma.isDocente()}">
			                    	<table class="table table-cards align-items-center">
			                    		<thead>
			                    			<tr>
			                    				<th></th>
			                    				<th>Documento</th>
				                    			<th>Nombre</th>
				                    			<th>Email</th>
			                    			</tr>
			                    			
			                    		</thead>
			                    		<tbody>
			                    			<tr>
			                    				<td><button type="button" onclick="updateNewDirPrograma(this)" th:data-documento="${newDirPrograma.documento}" class="btn btn-sm btn-red-ufps btn-icon-only" id="btnSaveAreas"><span class="btn-inner--icon">
											        <i class="fas fa-user-check"></i>
											    </span> </button></td>
			                    				<td th:text="${newDirPrograma.documento}"></td>
			                    				<td th:text="${newDirPrograma.nombre}"></td>
			                    				<td th:text="${newDirPrograma.email}"></td>
			                    			<tr>
			                    		</tbody>
			                    	</table>
		                    	</div>
		                    	<div th:if="${newDirPrograma == null}" class="alert alert-danger alert-flush" role="alert">
								    No se encontró usuario registrado con el número de documento ingresado
								</div>
								<div th:if="${newDirPrograma != null and !newDirPrograma.isDocente()}" class="alert alert-danger alert-flush" role="alert">
								    El usuario ingresado no es Docente, por lo tanto no puede ser actualizado como director del programa
								</div>
	                    	</div>
	                    </div>
                        </div>
				  	</div>
				  	</div>
               
                    
                </div>
                
            </div>
        </form>
    </div>
</div>

    <div th:replace="layouts/footer :: footer"></div>
    
  </div>
  <!-- Scripts -->
  <!-- Core JS - includes jquery, bootstrap, popper, in-view and sticky-kit -->
  <div th:replace="layouts/layout :: scripts"></div>
  <script th:src="@{/js/perfil.min.js}"  type="text/javascript"></script>
</body>

</html>