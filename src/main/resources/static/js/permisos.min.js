function actualizarPermisos(){var e=$("meta[name='_csrf']").attr("content"),t=$("#programasEC").val(),n=$("#programasEstudiantes").val(),d=$("#programasGraduados").val(),o=$("#deptosDocentes").val(),l=$("#educacionesContinuas").val(),s=document.getElementById("switchEduContinua"),c=document.getElementById("switchPersonas"),a=document.getElementById("switchAsistencias"),m=document.getElementById("cbAdminvo"),i=document.getElementById("cbE");if(null!=persona.programasForEduContinuaIntocables&&persona.programasForEduContinuaIntocables.forEach(e=>t.push(e.id)),null!=persona.programasForEstudiantesIntocables&&persona.programasForEstudiantesIntocables.forEach(e=>n.push(e.id)),null!=persona.programasForGraduadosIntocables&&persona.programasForGraduadosIntocables.forEach(e=>d.push(e.id)),null!=persona.deptosForDocentesIntocables&&persona.deptosForDocentesIntocables.forEach(e=>o.push(e.id)),null!=persona.eduContinuasForAttendanceIntocables&&persona.eduContinuasForAttendanceIntocables.forEach(e=>l.push(e.id)),persona.docente){if(!s.checked&&t.length>0||s.checked&&0==t.length||c.checked&&0==n.length&&0==o.length&&0==d.length&&!m.checked&&!i.checked||a.checked&&0==l.length||!c.checked&&(n.length>0||o.length>0||d.length>0||m.checked||i.checked)||!a.checked&&l.length>0)return void toastr.error("Por favor, diligencie el formulario correctamente","Error!")}else if(s.checked&&0==t.length||c.checked&&0==n.length&&0==o.length&&0==d.length&&!m.checked&&!i.checked||a.checked&&0==l.length||!s.checked&&t.length>0||!c.checked&&(n.length>0||o.length>0||d.length>0||m.checked||i.checked)||!a.checked&&l.length>0)return void toastr.error("Debes diligenciar el formulario correctamente","Error!");showSpinnerModal("btnActualizarPermisos","btnSpinnerPermisos"),$.ajax({headers:{"X-CSRF-TOKEN":e},type:"GET",contentType:"application/json; charset=utf-8",data:{idPersona:persona.idPersona,permisosEdC:s.checked,permisosPersonas:c.checked,permisosAttendance:a.checked,idsPEdC:t,idsPEs:n,idsDD:o,idsPG:d,permisoAdminvo:m.checked,permisoExterno:i.checked,idsEdCA:l,isDirPrograma:persona.dirPrograma,isDoc:persona.docente,idProgramaDirector:persona.idProgramaDirector},url:contextPath+"/usuarios/update-roles",cache:!1,success:function(e){toastr.success("Se han actualizado los roles a la persona","Excelente!"),hideSpinnerModal("btnActualizarPermisos","btnSpinnerPermisos")},error:function(e){hideSpinnerModal("btnActualizarPermisos","btnSpinnerPermisos"),toastr.error(e.responseJSON.message,"Error!")}})}function validadorErroresPermisos(){$("#switchEduContinua").click(function(){document.getElementById("switchEduContinua").checked?0==$("#programasEC").val().length?(document.getElementById("ePEC").style.display="block",document.getElementById("ePEC").innerText="Debes seleccionar como mínimo un Programa Académico al cual se va a gestionar las educaciones continuas",document.getElementById("wPEC").innerText="",document.getElementById("wPEC").style.display="none"):(document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none",document.getElementById("wPEC").innerText="",document.getElementById("wPEC").style.display="none"):0==$("#programasEC").val().length?(document.getElementById("wPEC").style.display="none",document.getElementById("wPEC").innerText="",document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none"):(document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none",document.getElementById("wPEC").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPEC").style.display="block")}),$("#programasEC").on("select2:select",function(e){0==$("#programasEC").val().length?document.getElementById("switchEduContinua").checked?(document.getElementById("ePEC").style.display="block",document.getElementById("ePEC").innerText="Debes seleccionar como mínimo un Programa Académico al cual se va a gestionar las educaciones continuas",document.getElementById("wPEC").innerText="",document.getElementById("wPEC").style.display="none"):(document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none",document.getElementById("wPEC").innerText="",document.getElementById("wPEC").style.display="none"):document.getElementById("switchEduContinua").checked?(document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none",document.getElementById("wPEC").innerText="",document.getElementById("wPEC").style.display="none"):(document.getElementById("wPEC").style.display="block",document.getElementById("wPEC").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none")}),$("#programasEC").on("select2:unselect",function(e){0==$("#programasEC").val().length?document.getElementById("switchEduContinua").checked?(document.getElementById("ePEC").style.display="block",document.getElementById("ePEC").innerText="Debes seleccionar como mínimo un Programa Académico al cual se va a gestionar las educaciones continuas",document.getElementById("wPEC").innerText="",document.getElementById("wPEC").style.display="none"):(document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none",document.getElementById("wPEC").innerText="",document.getElementById("wPEC").style.display="none"):document.getElementById("switchEduContinua").checked?(document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none",document.getElementById("wPEC").innerText="",document.getElementById("wPEC").style.display="none"):(document.getElementById("wPEC").style.display="block",document.getElementById("wPEC").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("ePEC").innerText="",document.getElementById("ePEC").style.display="none")}),$("#switchPersonas").click(function(){document.getElementById("switchPersonas").checked?0!=$("#programasEstudiantes").val().length||0!=$("#deptosDocentes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbAdminvo").checked||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").style.display="block",document.getElementById("ePP").innerText="Debes seleccionar como mínimo alguno de los aspectos que se encuentran a continuación",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):0!=$("#programasEstudiantes").val().length||0!=$("#deptosDocentes").val().length||0!=$("#programasGraduados").val().length||cbAdminvo.checked||cbE.checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"):(document.getElementById("wPP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none")}),$("#cbAdminvo").click(function(){document.getElementById("cbAdminvo").checked?document.getElementById("switchPersonas").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"):document.getElementById("switchPersonas").checked?0!=$("#programasEstudiantes").val().length||0!=$("#deptosDocentes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").style.display="block",document.getElementById("ePP").innerText="Debes seleccionar como mínimo alguno de los aspectos que se encuentran a continuación",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):0!=$("#programasEstudiantes").val().length||0!=$("#deptosDocentes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none")}),$("#cbE").click(function(){document.getElementById("cbE").checked?document.getElementById("switchPersonas").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"):document.getElementById("switchPersonas").checked?0!=$("#programasEstudiantes").val().length||0!=$("#deptosDocentes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbAdminvo").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").style.display="block",document.getElementById("ePP").innerText="Debes seleccionar como mínimo alguno de los aspectos que se encuentran a continuación",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):0!=$("#programasEstudiantes").val().length||0!=$("#deptosDocentes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbAdminvo").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none")}),$("#programasEstudiantes").on("select2:select",function(e){$("#programasEstudiantes").val().length>0&&(document.getElementById("switchPersonas").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"))}),$("#programasEstudiantes").on("select2:unselect",function(e){0==$("#programasEstudiantes").val().length?document.getElementById("switchPersonas").checked&&(0!=$("#deptosDocentes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbAdminvo").checked||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").style.display="block",document.getElementById("ePP").innerText="Debes seleccionar como mínimo alguno de los aspectos que se encuentran a continuación",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none")):0!=$("#deptosDocentes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbAdminvo").checked||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none")}),$("#deptosDocentes").on("select2:select",function(e){$("#deptosDocentes").val().length>0&&(document.getElementById("switchPersonas").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"))}),$("#deptosDocentes").on("select2:unselect",function(e){0==$("#deptosDocentes").val().length?document.getElementById("switchPersonas").checked&&(0!=$("#programasEstudiantes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbAdminvo").checked||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").style.display="block",document.getElementById("ePP").innerText="Debes seleccionar como mínimo alguno de los aspectos que se encuentran a continuación",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none")):0!=$("#programasEstudiantes").val().length||0!=$("#programasGraduados").val().length||document.getElementById("cbAdminvo").checked||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none")}),$("#programasGraduados").on("select2:select",function(e){$("#programasGraduados").val().length>0&&(document.getElementById("switchPersonas").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"))}),$("#programasGraduados").on("select2:unselect",function(e){0==$("#programasGraduados").val().length&&(document.getElementById("switchPersonas").checked?0!=$("#deptosDocentes").val().length||0!=$("#programasEstudiantes").val().length||document.getElementById("cbAdminvo").checked||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):(document.getElementById("ePP").style.display="block",document.getElementById("ePP").innerText="Debes seleccionar como mínimo alguno de los aspectos que se encuentran a continuación",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"):0!=$("#deptosDocentes").val().length||0!=$("#programasEstudiantes").val().length||document.getElementById("cbAdminvo").checked||document.getElementById("cbE").checked?(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wPP").style.display="block"):(document.getElementById("ePP").innerText="",document.getElementById("ePP").style.display="none",document.getElementById("wPP").innerText="",document.getElementById("wPP").style.display="none"))}),$("#switchAsistencias").click(function(){document.getElementById("switchAsistencias").checked?0==$("#educacionesContinuas").val().length?(document.getElementById("eA").style.display="block",document.getElementById("eA").innerText="Debes seleccionar como mínimo una educación continua al cual se va a gestionar la asistencia mediante la app",document.getElementById("wA").innerText="",document.getElementById("wA").style.display="none"):(document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none",document.getElementById("wA").innerText="",document.getElementById("wA").style.display="none"):0==$("#educacionesContinuas").val().length?(document.getElementById("wA").style.display="none",document.getElementById("wA").innerText="",document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none"):(document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none",document.getElementById("wA").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("wA").style.display="block")}),$("#educacionesContinuas").on("select2:select",function(e){0==$("#educacionesContinuas").val().length?document.getElementById("switchAsistencias").checked?(document.getElementById("eA").style.display="block",document.getElementById("eA").innerText="Debes seleccionar como mínimo una educación continua al cual se va a gestionar la asistencia mediante la app",document.getElementById("wA").innerText="",document.getElementById("wA").style.display="none"):(document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none",document.getElementById("wA").innerText="",document.getElementById("wA").style.display="none"):document.getElementById("switchAsistencias").checked?(document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none",document.getElementById("wA").innerText="",document.getElementById("wA").style.display="none"):(document.getElementById("wA").style.display="block",document.getElementById("wA").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none")}),$("#educacionesContinuas").on("select2:unselect",function(e){0==$("#educacionesContinuas").val().length?document.getElementById("switchAsistencias").checked?(document.getElementById("eA").style.display="block",document.getElementById("eA").innerText="Debes seleccionar como mínimo una educación continua al cual se va a gestionar la asistencia mediante la app",document.getElementById("wA").innerText="",document.getElementById("wA").style.display="none"):(document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none",document.getElementById("wA").innerText="",document.getElementById("wA").style.display="none"):document.getElementById("switchAsistencias").checked?(document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none",document.getElementById("wA").innerText="",document.getElementById("wA").style.display="none"):(document.getElementById("wA").style.display="block",document.getElementById("wA").innerText="Debes activar el estado del permiso para que sea válido el registro",document.getElementById("eA").innerText="",document.getElementById("eA").style.display="none")})}$(document).ready(function(){var e=[];persona.programasForEduContinua.forEach(t=>e.push(t.id)),$("#programasEC").val(e),$("#programasEC").trigger("change");var t=[];persona.programasForEstudiantes.forEach(e=>t.push(e.id)),$("#programasEstudiantes").val(t),$("#programasEstudiantes").trigger("change");var n=[];persona.programasForGraduados.forEach(e=>n.push(e.id)),$("#programasGraduados").val(n),$("#programasGraduados").trigger("change");var d=[];persona.deptosForDocentes.forEach(e=>d.push(e.id)),$("#deptosDocentes").val(d),$("#deptosDocentes").trigger("change");var o=[];persona.eduContinuasForAttendance.forEach(e=>o.push(e.id)),$("#educacionesContinuas").val(o),$("#educacionesContinuas").trigger("change"),validadorErroresPermisos(),$("#btnActualizarPermisos").click(function(){actualizarPermisos()})});