function ajaxGenerarDiploma(a,t,n,e,i){var o=new FormData,c=i.toDataURL({format:"jpg",quality:.8}),r=dataURItoBlob(c),p=new File([r],"certificado.jpg",{type:"image/jpg"});o.append("file",p),o.append("filename",e),o.append("tokenParticipante",a),o.append("idEduContinua",t),o.append("documentoParticipante",n),$.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",contentType:"application/json; charset=utf-8",url:contextPath+"/certificaciones-educacion-continua/actualizarCertificado",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,success:function(t){verDiploma(a)},error:function(a){}})}function verDiploma(a){var t=document.createElement("a");t.href=contextPath+"/certificaciones-educacion-continua/visualizar-diploma?token="+a,window.open(t.href,"_blank")}$(document).ready(function(){var a=new fabric.Canvas("canvasDiplomaParticipante",{renderOnAddRemove:!0,canvasOriginalWidth:800,canvasOriginalHeight:600,canvasWidth:800,canvasHeight:600});$(".linkCertificado").on("click",function(t){t.preventDefault();var n=t.currentTarget.dataset.token;$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",url:contextPath+"/certificaciones-educacion-continua/search-certificacion",data:{token:n},cache:!1,success:function(t){t.updateDiploma?a.loadFromJSON(t.diplomaDto.estructuraDiploma,function(n,e){updateInfoDiploma(t.participanteDto.nombrePersona,t.participanteDto.tipoDocumento+" "+t.participanteDto.numeroDocumento,t.participanteDto.tipoParticipante,a,t.eduContinuaDto.facultad,t.eduContinuaDto.programaResp,t.eduContinuaDto.tipoEduContinua,t.eduContinuaDto.nombre,t.eduContinuaDto.duracion,t.eduContinuaDto.fechaFin),ajaxGenerarDiploma(t.participanteDto.token,t.participanteDto.idEducacionContinua,t.participanteDto.numeroDocumento,t.participanteDto.diplomaParticipacion,a)}):verDiploma(n)},error:function(a){}})})});function viewMyCertificado(element){var t=document.createElement("a");t.href=contextPath+"/certificaciones-educacion-continua/visualizar-diploma?token="+element.dataset.token,window.open(t.href,"_blank")}