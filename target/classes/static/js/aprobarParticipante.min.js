function aprobarAsistente(t){t.checked?generarDiploma(t.dataset,t):deshacerDiploma(t.dataset,t)}function viewDiploma(t){null==t.dataset.miDiploma?generarDiplomaEstudiante(t.dataset,t):descargarDiploma(t.dataset.token)}function generarDiploma(t,a){updateInfoDiploma(t.participante,t.tipodocumento+" "+t.documento,t.tipoparticipante,canvas,eduContinua.facultad,eduContinua.programaResp,eduContinua.tipoEduContinua,eduContinua.nombre,eduContinua.duracion,eduContinua.fechaFin);var e=new FormData,n=canvas.toDataURL({format:"jpg",quality:.8}),i=dataURItoBlob(n),o=new File([i],"certificado.jpg",{type:"image/jpg"});e.append("file",o),e.append("tokenParticipante",t.token),e.append("idEduContinua",eduContinua.id),e.append("documentoParticipante",t.documento),$.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",contentType:"application/json; charset=utf-8",url:contextPath+"/educacion-continua/certificarParticipacion",data:e,enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,success:function(a){toastr.success("Se ha aprobado la participación exitosamente","Excelente!",{positionClass:"toast-top-right",preventDuplicates:!0}),loadDiplomaStructureParticipantes(JSON.stringify(eduContinua.diploma.estructuraDiploma)),document.getElementById("aCertificado_"+t.token).classList.remove("action-item-disabled"),refreshTableAsistentes()},error:function(t){}})}function generarDiplomaEstudiante(t,a){updateInfoDiploma(t.participante,t.tipodocumento+" "+t.documento,t.tipoparticipante,canvas,eduContinua.facultad,eduContinua.programaResp,eduContinua.tipoEduContinua,eduContinua.nombre,eduContinua.duracion,eduContinua.fechaFin);var e=new FormData,n=canvas.toDataURL({format:"jpg",quality:.8}),i=dataURItoBlob(n),o=new File([i],"certificado.jpg",{type:"image/jpg"});e.append("file",o),e.append("tokenParticipante",t.token),e.append("idEduContinua",eduContinua.id),e.append("documentoParticipante",t.documento),$.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",contentType:"application/json; charset=utf-8",url:contextPath+"/educacion-continua/certificarParticipacion",data:e,enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,success:function(t){loadDiplomaStructureParticipantes(JSON.stringify(eduContinua.diploma.estructuraDiploma)),descargarDiploma(a.dataset.token)},error:function(t){}})}function descargarDiploma(t){var a=document.createElement("a");a.href=contextPath+"/certificaciones-educacion-continua/visualizar-diploma?token="+t,window.open(a.href,"_blank")}function deshacerDiploma(t,a){var e=new FormData;e.append("tokenParticipante",t.token),$.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",contentType:"application/json; charset=utf-8",url:contextPath+"/educacion-continua/cancelarCertificacionParticipacion",data:e,enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,success:function(a){toastr.success("Se ha retirado la certificación exitosamente","Excelente!",{positionClass:"toast-top-right",preventDuplicates:!0}),document.getElementById("aCertificado_"+t.token).classList.add("action-item-disabled"),refreshTableAsistentes()},error:function(t){}})}function updateStyleCells(t,a){var e=document.getElementsByClassName(t);Array.prototype.forEach.call(e,function(t){t.style.display=a})}function refreshTableAsistentes(){var t=contextPath+"/educacion-continua/detalles/asistentes/"+eduContinua.idAcceso;$("#div_table_asistentes").load(t)}function loadDiplomaStructureParticipantes(t){canvas.loadFromJSON(t)}function aprobarPreinscripcionAll(){swal("Está seguro de aprobar todas las preinscripciones?",{buttons:{cancel:"Cancelar",aceptar:{text:"Aceptar",value:"aceptar"}}}).then(t=>{switch(t){case"aceptar":$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",data:{idEduContinua:eduContinua.id},url:contextPath+"/educacion-continua/aprobarPreInscripcionTodos",cache:!1,success:function(t){toastr.success("Se ha aprobado la inscripción de todos los participantes exitosamente","Excelente!",{positionClass:"toast-top-right",preventDuplicates:!0}),refreshTableAsistentes()},error:function(t){}})}})}function aprobarPreinscripcionParticipanteListado(t){$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",data:{idEduContinua:eduContinua.id,tokenParticipante:t.dataset.token},url:contextPath+"/educacion-continua/aprobarPreInscripcionParticipante",cache:!1,success:function(t){toastr.success("Se ha aprobado la inscripcion del participante exitosamente","Excelente!",{positionClass:"toast-top-right",preventDuplicates:!0}),refreshTableAsistentes()},error:function(t){}})}function deleteParticipanteListado(t){$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",data:{idEduContinua:eduContinua.id,tokenParticipante:t.dataset.token},url:contextPath+"/educacion-continua/cancelarPreInscripcionParticipante",cache:!1,success:function(t){toastr.success("Se ha cancelado la inscripcion del participante exitosamente","Excelente!",{positionClass:"toast-top-right",preventDuplicates:!0}),refreshTableAsistentes(),reloadListPonentes()},error:function(t){}})}function NotificarPreinscripcionParticipanteListado(t){$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",data:{idEduContinua:eduContinua.id,tokenParticipante:t.dataset.token},url:contextPath+"/educacion-continua/notificarPreInscripcionParticipante",cache:!1,success:function(t){toastr.success("Se ha notificado la inscripcion del participante exitosamente","Excelente!",{positionClass:"toast-top-right",preventDuplicates:!0})},error:function(t){}})}function notificarPreinscripcionAllParticipantes(){swal("Está seguro de notificar todos los participantes?",{buttons:{cancel:"Cancelar",aceptar:{text:"Aceptar",value:"aceptar"}}}).then(t=>{switch(t){case"aceptar":$.ajax({headers:{"X-CSRF-TOKEN":token},type:"GET",contentType:"application/json; charset=utf-8",data:{idEduContinua:eduContinua.id},url:contextPath+"/educacion-continua/notificarPreInscripcionTodos",cache:!1,success:function(t){toastr.success("Se ha notificado la inscripción a los participantes exitosamente","Excelente!",{positionClass:"toast-top-right",preventDuplicates:!0})},error:function(t){}})}})}function generarEmailsTxt(t,a,e){let n=document.createElement("a");swal("¿Seleccione los asistentes de los cuáles dese generar los emails?",{buttons:{cancel:"Cancelar",todos:{text:"Todos",value:"todos"},inscripcionAprobada:{text:"Inscripción aprobada",value:"inscripcionAprobada"}}}).then(i=>{switch(i){case"inscripcionAprobada":n.setAttribute("href",contextPath+"/educacion-continua/email-participantes?educacionContinua="+t+"&fecha="+a+"&id="+e+"&all=false"),n.click();break;case"todos":n.setAttribute("href",contextPath+"/educacion-continua/email-participantes?educacionContinua="+t+"&fecha="+a+"&id="+e),n.click()}})}