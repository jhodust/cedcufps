function aprobarAsistente(a) {
    a.checked ? generarDiploma(a.dataset, a) : deshacerDiploma(a.dataset, a);
}
function viewDiploma(a) {
    null == a.dataset.miDiploma ? generarDiplomaEstudiante(a.dataset, a) : descargarDiploma(a.dataset.token);
}
function generarDiploma(a, t) {
    updateInfoDiploma(
        a.participante,
        a.tipodocumento + " " + a.documento,
        a.tipoparticipante,
        canvas,
        eduContinua.facultad,
        eduContinua.programaResp,
        eduContinua.tipoEduContinua,
        eduContinua.nombre,
        eduContinua.duracion,
        eduContinua.fechaFin
    );
    var e = new FormData(),
        n = canvas.toDataURL({ format: "jpg", quality: 0.8 }),
        o = dataURItoBlob(n),
        i = new File([o], "certificado.jpg", { type: "image/jpg" });
    e.append("file", i),
        e.append("tokenParticipante", a.token),
        e.append("idEduContinua", eduContinua.id),
        e.append("documentoParticipante", a.documento),
        $.ajax({
            headers: { "X-CSRF-TOKEN": token },
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: contextPath + "/educacion-continua/certificarParticipacion",
            data: e,
            enctype: "multipart/form-data",
            processData: !1,
            contentType: !1,
            cache: !1,
            success: function (t) {
                toastr.success("Se ha aprobado la participación exitosamente", "Excelente!", { positionClass: "toast-top-right", preventDuplicates: !0 }),
                    loadDiplomaStructureParticipantes(JSON.stringify(eduContinua.diploma.estructuraDiploma)),
                    document.getElementById("aCertificado_" + a.token).classList.remove("action-item-disabled"),
                    refreshTableAsistentes();
            },
            error: function (a) {},
        });
}
function generarDiplomaEstudiante(a, t) {
    updateInfoDiploma(
        a.participante,
        a.tipodocumento + " " + a.documento,
        a.tipoparticipante,
        canvas,
        eduContinua.facultad,
        eduContinua.programaResp,
        eduContinua.tipoEduContinua,
        eduContinua.nombre,
        eduContinua.duracion,
        eduContinua.fechaFin
    );
    var e = new FormData(),
        n = canvas.toDataURL({ format: "jpg", quality: 0.8 }),
        o = dataURItoBlob(n),
        i = new File([o], "certificado.jpg", { type: "image/jpg" });
    e.append("file", i),
        e.append("tokenParticipante", a.token),
        e.append("idEduContinua", eduContinua.id),
        e.append("documentoParticipante", a.documento),
        $.ajax({
            headers: { "X-CSRF-TOKEN": token },
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: contextPath + "/educacion-continua/certificarParticipacion",
            data: e,
            enctype: "multipart/form-data",
            processData: !1,
            contentType: !1,
            cache: !1,
            success: function (a) {
                loadDiplomaStructureParticipantes(JSON.stringify(eduContinua.diploma.estructuraDiploma)), descargarDiploma(t.dataset.token);
            },
            error: function (a) {},
        });
}
function descargarDiploma(a) {
    var t = document.createElement("a");
    (t.href = contextPath + "/certificaciones-educacion-continua/visualizar-diploma?token=" + a), window.open(t.href, "_blank");
}
function deshacerDiploma(a, t) {
    var e = new FormData();
    e.append("tokenParticipante", a.token),
        $.ajax({
            headers: { "X-CSRF-TOKEN": token },
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: contextPath + "/educacion-continua/cancelarCertificacionParticipacion",
            data: e,
            enctype: "multipart/form-data",
            processData: !1,
            contentType: !1,
            cache: !1,
            success: function (t) {
                toastr.success("Se ha retirado la certificación exitosamente", "Excelente!", { positionClass: "toast-top-right", preventDuplicates: !0 }),
                    document.getElementById("aCertificado_" + a.token).classList.add("action-item-disabled"),
                    refreshTableAsistentes();
            },
            error: function (a) {},
        });
}
function updateStyleCells(a, t) {
    var e = document.getElementsByClassName(a);
    Array.prototype.forEach.call(e, function (a) {
        a.style.display = t;
    });
}
function refreshTableAsistentes() {
    var a = contextPath + "/educacion-continua/detalles/asistentes/" + eduContinua.idAcceso;
    $("#div_table_asistentes").load(a);
}
function loadDiplomaStructureParticipantes(a) {
    canvas.loadFromJSON(a);
}

function aprobarPreinscripcionAll(){
	$.ajax({
		 headers: {"X-CSRF-TOKEN": token},
			type: "GET",
			contentType: "application/json; charset=utf-8",
			data: {'idEduContinua':eduContinua.id},
        url: contextPath + "/educacion-continua/aprobarPreInscripcionTodos",
        
        cache: !1,
        success: function (t) {
            toastr.success("Se ha aprobado la inscripción de todos los participantes exitosamente", "Excelente!", { positionClass: "toast-top-right", preventDuplicates: !0 }),
            refreshTableAsistentes();
        },
        error: function (a) {},
    });
}

function aprobarPreinscripcionParticipanteListado(element){
	 $.ajax({
		 headers: {"X-CSRF-TOKEN": token},
			type: "GET",
			contentType: "application/json; charset=utf-8",
		data: {'idEduContinua':eduContinua.id, 'tokenParticipante':element.dataset.token},
         url: contextPath + "/educacion-continua/aprobarPreInscripcionParticipante",
         cache: !1,
         success: function (t) {
             toastr.success("Se ha aprobado la inscripcion del participante exitosamente", "Excelente!", { positionClass: "toast-top-right", preventDuplicates: !0 }),
                refreshTableAsistentes();
         },
         error: function (a) {},
     });
}

function deleteParticipanteListado(element){
	 $.ajax({
		 headers: {"X-CSRF-TOKEN": token},
			type: "GET",
			contentType: "application/json; charset=utf-8",
		data: {'idEduContinua':eduContinua.id, 'tokenParticipante':element.dataset.token},
        url: contextPath + "/educacion-continua/cancelarPreInscripcionParticipante",
        cache: !1,
        success: function (t) {
            toastr.success("Se ha cancelado la inscripcion del participante exitosamente", "Excelente!", { positionClass: "toast-top-right", preventDuplicates: !0 }),
                refreshTableAsistentes();
        },
        error: function (a) {},
    });
}

function NotificarPreinscripcionParticipanteListado(element){
	 $.ajax({
		 headers: {"X-CSRF-TOKEN": token},
			type: "GET",
			contentType: "application/json; charset=utf-8",
		data: {'idEduContinua':eduContinua.id, 'tokenParticipante':element.dataset.token},
       url: contextPath + "/educacion-continua/notificarPreInscripcionParticipante",
       cache: !1,
       success: function (t) {
           toastr.success("Se ha notificado la inscripcion del participante exitosamente", "Excelente!", { positionClass: "toast-top-right", preventDuplicates: !0 });
        },
       error: function (a) {},
   });
}

function notificarPreinscripcionAllParticipantes(){
	 $.ajax({
		 headers: {"X-CSRF-TOKEN": token},
			type: "GET",
			contentType: "application/json; charset=utf-8",
		data: {'idEduContinua':eduContinua.id},
       url: contextPath + "/educacion-continua/notificarPreInscripcionTodos",
       cache: !1,
       success: function (t) {
           toastr.success("Se ha notificado la inscripcion a los participantes exitosamente", "Excelente!", { positionClass: "toast-top-right", preventDuplicates: !0 });
       },
       error: function (a) {},
   });
}