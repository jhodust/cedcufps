<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layouts/layout :: head">
	<meta charset="UTF-8"/>
</head>
<body>
  <!-- Application container -->
  <div class="container-fluid container-application">
    <!-- Content -->
    <div class="main-content position-relative">
      <!-- Main nav -->
      <div th:replace="layouts/logosHead :: logosHead"></div>
      <nav th:replace="layouts/navbar :: navbar"></nav>
      
      <!-- Page content -->
      <div class="page-content col-lg-9 center">
       <!-- Project cards -->
       <nav aria-label="breadcrumb">
		  <ol class="breadcrumb breadcrumb-links">
		    <li class="breadcrumb-item"><a class="red-ufps-breadcrumb" th:href="@{/}">Inicio</a></li>
		    <li class="breadcrumb-item"><a class="red-ufps-breadcrumb" th:href="@{/usuarios}">Usuarios</a></li>
		    <li class="breadcrumb-item active" aria-current="page">Roles</li>
		  </ol>
		</nav>
        <!-- Page title -->
       	<div class="contenido ml-3 mr-3 pb-2" >
        <div class="page-title">
          <div class="row justify-content-between align-items-center">
            <div class="col-md-6 d-flex align-items-center justify-content-between justify-content-md-start mb-3 mb-md-0">
              <!-- Page title + Go Back button -->
              <div class="d-inline-block">
                <h5 class="h4 d-inline-block font-weight-400 mb-0 text-dark" ><strong>Roles Usuarios</strong></h5>
              </div>
            </div>
            
          </div>
        </div>
        <hr/>
        
		<div class="row">
			<div class="col-lg-12">
				<div class="card">
					<!-- Card header -->
					
					<div class="card-body">
						
					<div class="row">
						<div class="col-md-12">
							<center>
							<h5>Roles</h5>
							</center>
							<form th:action="@{/persona/permisos}"
										 method="post"
										enctype="multipart/form-data">
							<div id="accordion-1" class="accordion accordion-stacked">
    
						    <!-- Accordion card 1 -->
						    <div class="card">
						        <div class="card-header py-4" id="heading-1-1" data-toggle="collapse" role="button" data-target="#collapse-1-1" aria-expanded="true" aria-controls="collapse-1-1">
						            <h6 class="mb-0"><i class="fas fa-user-shield mr-3"></i>Educación Continua</h6>
						        </div>
						        <div id="collapse-1-1" class="collapse" aria-labelledby="heading-1-1" data-parent="#accordion-1">
						            <div class="card-body">
						            	<div class="row">
							            	<div class="custom-control custom-switch">
											  <input type="checkbox" class="custom-control-input switch" id="switchEduContinua" data-role="ROLE_ADMIN_CEEC" th:checked="${persona.hasPermissionForEduContinua}">
											  <label class="custom-control-label" for="switchEduContinua"><strong>Gestionar Eventos de Educación Continua (Registrar, Editar, Actualizar, Visualizar)</strong></label>
											</div>
										</div>
										<br>
										
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<label class="form-control-label">¿A cuáles Programas Académicos desea asociar los permisos?</label> <select class="form-control"
														data-toggle="select" id="programasEC" multiple="multiple">
														<option value="0">Seleccione el programa...</option>
														<option th:each="p: ${persona.selectProgramasForEduContinua}" th:value="${p.id}"
														 
															th:text="${p.programa}"></option>
													</select>
													<small class="form-text text-danger"><strong></strong></small>
												</div>
												<div class="alert alert-info" role="alert" th:if="${persona.isDirPrograma()}">
												   <strong th:text="${persona.programaDirector}"></strong> - El usuario ya tiene otorgados permisos para la gestión de cursos y/o eventos de educación continua en este Programa dado que es Director(a)
												</div>
											</div>
										</div>
						            </div>
						        </div>
						    </div>
						    
						    <!-- Accordion card 2 -->
						    <div class="card">
						        <div class="card-header py-4" id="heading-1-2" data-toggle="collapse" role="button" data-target="#collapse-1-2" aria-expanded="true" aria-controls="collapse-1-2">
						            <h6 class="mb-0"><i class="fas fa-user-shield mr-3"></i>Usuarios</h6>
						        </div>
						        <div id="collapse-1-2" class="collapse" aria-labelledby="heading-1-2" data-parent="#accordion-1">
						            <div class="card-body">
						                <div class="row">
							            	<div class="custom-control custom-switch">
											  <input type="checkbox" class="custom-control-input switch" id="switchEduContinua" data-role="ROLE_ADMIN_CEEC" th:checked="${persona.hasPermissionForUsuarios}">
											  <label class="custom-control-label" for="switchEduContinua"><strong>Gestionar Usuarios (Registrar, Editar, Actualizar, Visualizar)</strong></label>
											</div>
										</div>
										<br>
										<div class="alert alert-info" role="alert" th:if="${persona.isDirPrograma()}">
										   <strong th:text="${persona.programaDirector}"></strong> - El usuario ya tiene otorgados permisos para la gestión de estudiantes y graduados en este Programa dado que es Director(a)
										</div>
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<label class="form-control-label"> ¿En cuáles Programas Académicos desea gestionar Estudiantes?</label> <select class="form-control"
														data-toggle="select" id="programasEstudiantes" multiple="multiple">
														<option value="0">Seleccione los programas...</option>
														<option th:each="p: ${persona.selectProgramasForEstudiantes}" th:value="${p.id}"
															th:text="${p.programa}"></option>
													</select>
													<small class="form-text text-danger"><strong></strong></small>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<label class="form-control-label">¿En cuáles Departamentos Académicos desea gestionar docentes?</label> <select class="form-control"
														data-toggle="select" id="deptosDocentes" multiple="multiple">
														<option value="0">Seleccione los departamentos...</option>
														<option th:each="d: ${persona.selectDeptosForDocentes}" th:value="${d.id}"
															th:text="${d.departamento}"></option>
													</select>
													<small class="form-text text-danger"><strong></strong></small>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<label class="form-control-label"> ¿En cuáles Programas Académicos desea gestionar Graduados?</label> <select class="form-control"
														data-toggle="select" id="programasGraduados" multiple="multiple">
														<option value="0">Seleccione los programas...</option>
														<option th:each="p: ${persona.selectProgramasForGraduados}" th:value="${p.id}"
															th:text="${p.programa}"></option>
													</select>
													<small class="form-text text-danger"><strong></strong></small>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
											<div class="custom-control custom-checkbox">
												<input type="checkbox" class="custom-control-input"  th:checked="${persona.hasPermissionForAdminvos}">
												 <label class="custom-control-label">Administrativos</label>
											</div>
										</div>
										<div class="col-md-6">
											<div class="custom-control custom-checkbox">
												<input type="checkbox" class="custom-control-input"  th:checked="${persona.hasPermissionForAdminvos}">
												 <label class="custom-control-label">Externos</label>
											</div>
										</div>
						            </div>
						        </div>
						    </div>
						    
						    <!-- Accordion card 3 -->
						    <div class="card">
						        <div class="card-header py-4" id="heading-1-3" data-toggle="collapse" role="button" data-target="#collapse-1-3" aria-expanded="true" aria-controls="collapse-1-3">
						            <h6 class="mb-0"><i class="fas fa-user-shield mr-3"></i>Toma de Asistencias</h6>
						        </div>
						        <div id="collapse-1-3" class="collapse" aria-labelledby="heading-1-3" data-parent="#accordion-1">
						            <div class="card-body">
						                <div class="row">
							            	<div class="custom-control custom-switch">
											  <input type="checkbox" class="custom-control-input switch" id="switchEduContinua" data-role="ROLE_ADMIN_CEEC" th:checked="${persona.hasPermissionForAttendance}">
											  <label class="custom-control-label" for="switchEduContinua"><strong>Tomar Asistencias en dispositivo móvil</strong></label>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<label class="form-control-label"> Educaciones Continuas</label> <select class="form-control"
														data-toggle="select" id="educacionesContinuas" multiple="multiple">
														<option value="0">Seleccione los programas...</option>
														<option th:each="e: ${persona.selectEduContinuasForAttendance}" th:value="${e.id}"
															th:text="${e.nombre}"></option>
													</select>
													<small class="form-text text-danger"><strong></strong></small>
												</div>
											</div>
										</div>
						            </div>
						        </div>
						    </div>
						    
						</div>
							</div>
							</form>
						</div>
					</div>
					
				</div>
			</div>
				</div>

				
		</div>
	  </div>
    
    </div>
    <div th:replace="layouts/footer :: footer"></div>
    
  </div>
  </div>
  <!-- Scripts -->
  <!-- Core JS - includes jquery, bootstrap, popper, in-view and sticky-kit -->
  <div th:replace="layouts/layout :: scripts"></div>
  <script type="text/javascript" th:inline="javascript">
 
  $( document ).ready(function() {
	  var idsEduCForPrograma= [];
	  var eduCForPrograma= [[${persona.programasForEduContinua}]];
	  eduCForPrograma.forEach(element => idsEduCForPrograma.push(element.id));

	  console.log(idsEduCForPrograma);
	  $('#programasEC').val(idsEduCForPrograma);
	  $('#programasEC').trigger('change');
	  
	  var idsProgramaForEst= [];
	  var prograForEst= [[${persona.programasForEstudiantes}]];
	  prograForEst.forEach(element => idsProgramaForEst.push(element.id));

	  console.log(idsProgramaForEst);
	  $('#programasEstudiantes').val(idsProgramaForEst);
	  $('#programasEstudiantes').trigger('change');
	  
	  var idsProgramaForGrad= [];
	  var prograForGradu= [[${persona.programasForGraduados}]];
	  prograForGradu.forEach(element => idsProgramaForGrad.push(element.id));

	  console.log(idsProgramaForGrad);
	  $('#programasGraduados').val(idsProgramaForGrad);
	  $('#programasGraduados').trigger('change');
	  
	  var idsDeptoForDocentes= [];
	  var deptoForDoc= [[${persona.deptosForDocentes}]];
	  deptoForDoc.forEach(element => idsDeptoForDocentes.push(element.id));

	  console.log(idsDeptoForDocentes);
	  $('#deptosDocentes').val(idsDeptoForDocentes);
	  $('#deptosDocentes').trigger('change');
	  
	  var idsEduCForAtten= [];
	  var eduCForAtten= [[${persona.eduContinuasForAttendance}]];
	  eduCForAtten.forEach(element => idsEduCForAtten.push(element.id));

	  console.log(idsEduCForAtten);
	  $('#educacionesContinuas').val(idsEduCForAtten);
	  $('#educacionesContinuas').trigger('change');
	});
  
  
 
  /*var token = $("meta[name='_csrf']").attr("content");
  var persona= [[${persona}]];
  console.log(persona);
  console.log(persona.roles);
  */
  </script>
  
  <!-- <script th:src="@{/js/permisos.js}" type="text/javascript"></script> -->
  
  
</body>

</html>
